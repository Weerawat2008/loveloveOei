<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏£‡∏±‡∏Å ‚Äî ‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö üíï</title>
  <style>
    :root{--bg1:#fff0f6;--bg2:#fff7fb;--card:#ffffffcc;--accent:#ff7ab6;--muted:#7d6a7d}
    html,body{margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans', 'Helvetica Neue', Arial}
    body{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#2b1f2b;display:flex;align-items:center;justify-content:center;padding:20px;min-height:100vh;overflow:auto;scroll-behavior:smooth}
    .app{width:1100px;max-width:100%;display:grid;grid-template-columns:380px 1fr;gap:20px}
    .panel{background:var(--card);border-radius:14px;padding:18px;box-shadow:0 8px 30px rgba(120,70,100,0.08)}
    h2{margin:0 0 10px 0;font-size:18px;color:#3b233b}
    .muted{color:var(--muted);font-size:13px}

    .items{display:flex;flex-direction:column;gap:10px;max-height:440px;overflow:auto;padding-right:6px}
    .item{display:flex;gap:8px;align-items:center}
    .item input[type=text]{flex:1;padding:8px;border-radius:10px;border:1px solid rgba(120,70,100,0.06);background:transparent;color:inherit}
    .item input[type=color]{width:44px;height:36px;border-radius:10px;border:0;padding:0}
    button{background:var(--accent);border:0;color:white;padding:10px 16px;border-radius:10px;font-weight:700;cursor:pointer;font-size:15px}

    .stage{display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px}
    .wheel-wrap{position:relative}
    canvas{background:transparent;border-radius:12px;touch-action:none;display:block}
    .pointer{position:absolute;left:50%;transform:translateX(-50%);top:-14px;width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:26px solid #fff1f6;filter:drop-shadow(0 6px 12px rgba(150,70,120,0.12))}
    .result{margin-top:8px;padding:10px 14px;border-radius:12px;background:linear-gradient(90deg,#fff6fb,#fff8f9);min-height:44px;display:flex;align-items:center;gap:8px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6)}

    /* üíó hearts emoji animation */
    .hearts{position:fixed;left:0;right:0;top:0;bottom:0;pointer-events:none;overflow:hidden;font-size:22px;z-index:0}
    .hearts span{position:absolute;animation:floatUp 6s linear infinite;opacity:0.8}
    @keyframes floatUp{
      0%{transform:translateY(100vh) scale(0.6);opacity:0}
      10%{opacity:1}
      100%{transform:translateY(-20vh) scale(1.1);opacity:0}
    }

    /* overlay intro */
    .overlay{position:fixed;left:0;right:0;top:0;bottom:0;background:linear-gradient(180deg,rgba(255,245,250,0.95),rgba(255,249,251,0.92));display:flex;align-items:center;justify-content:center;z-index:40}
    .intro{max-width:760px;width:94%;background:linear-gradient(180deg,#ffffff,#fff7fb);border-radius:16px;padding:26px;box-shadow:0 20px 60px rgba(120,60,100,0.12);text-align:center}
    .intro h1{margin:0;font-size:28px;color:#5a2f56}
    .intro p{margin:10px 0 18px 0;color:#6b4a6b}
    .start-btn{background:#ff6fa8;color:white;padding:12px 20px;border-radius:12px;font-size:16px;border:0;cursor:pointer}

    /* responsive */
    @media(max-width:980px){.app{grid-template-columns:1fr;padding:12px}.panel{padding:14px}}
    @media(max-width:600px){button{width:100%}}

    /* ===== Scrollbar Style ===== */
    /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô .items */
    .items::-webkit-scrollbar {
      width: 10px;
    }
    .items::-webkit-scrollbar-track {
      background: #ffe6f0;
      border-radius: 10px;
    }
    .items::-webkit-scrollbar-thumb {
      background-color: #ff7ab6;
      border-radius: 10px;
      border: 2px solid #ffe6f0;
    }
    .items::-webkit-scrollbar-thumb:hover {
      background-color: #ff4d94;
    }
    .items {
      scrollbar-width: thin;
      scrollbar-color: #ff7ab6 #ffe6f0;
    }

    /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö */
    body::-webkit-scrollbar {
      width: 12px;
    }
    body::-webkit-scrollbar-track {
      background: #fff0f6;
    }
    body::-webkit-scrollbar-thumb {
      background-color: #ff99c9;
      border-radius: 8px;
      border: 2px solid #fff0f6;
    }
    body::-webkit-scrollbar-thumb:hover {
      background-color: #ff6fa8;
    }
    body {
      scrollbar-width: thin;
      scrollbar-color: #ff99c9 #fff0f6;
    }
  </style>
</head>
<body>
  <div class="hearts" id="hearts"></div>

  <div class="app">
    <div class="panel">
      <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á</h2>
      <div class="muted">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠</div>
      <div class="items" id="items"></div>

      <div style="display:flex;gap:8px;margin-top:12px">
        <input id="newText" placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏°‡πà ‡πÄ‡∏ä‡πà‡∏ô 'üíã ‡∏´‡∏≠‡∏° 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á'" style="flex:1;padding:8px;border-radius:10px;border:1px solid rgba(120,70,100,0.06)" />
        <button id="addNew">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
      </div>

      <div style="display:flex;gap:8px;margin-top:12px">
        <button id="shuffle">‡∏™‡∏∏‡πà‡∏°‡∏™‡∏µ</button>
        <button id="reset">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
      </div>
    </div>

    <div class="panel stage">
      <h2 style="width:100%;text-align:center">‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç</h2>
      <div class="wheel-wrap">
        <div class="pointer" id="pointer"></div>
        <canvas id="wheel" width="720" height="720"></canvas>
      </div>

      <button id="spin" style="margin-top:10px;">üíû ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠ üíû</button>
      <div class="result" id="result">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
    </div>
  </div>

  <div class="overlay" id="intro">
    <div class="intro">
      <h1>‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏∞‡πÄ‡∏ö‡∏ö‡∏µ‡πã‡∏≠‡πâ‡∏ß‡∏ô üíï</h1>
      <p>‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏∞‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡∏à‡πä‡∏∞‡∏∞? ‚ù§Ô∏è</p>
      <div style="margin-top:14px"><button class="start-btn" id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢</button></div>
    </div>
  </div>

<script>
const defaultItems = [
  {text:'üíã ‡∏à‡∏∏‡πâ‡∏ö 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á', color:'#FFB6D5'},
  {text:'üç∞ ‡∏û‡∏≤‡πÑ‡∏õ‡∏Å‡∏¥‡∏ô‡∏Ç‡∏ô‡∏°', color:'#FFD8A8'},
  {text:'üéÅ ‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏ö‡∏µ‡πã‡∏à‡∏±‡∏ö‡∏û‡∏∏‡∏á', color:'#CFE9B9'},
  {text:'üé¨ ‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô', color:'#9ED9FF'},
  {text:'üôåüèª ‡∏Å‡∏≠‡∏î‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô', color:'#E7C7FF'},
  {text:'üíì ‡∏ä‡∏°‡πÄ‡∏ö‡∏ö‡∏µ‡πã‡∏≠‡πâ‡∏ß‡∏ô', color:'#FFE0F0'},
  {text:'üëèüèª ‡∏ô‡∏ß‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏ö‡∏ö‡∏µ‡πã', color:'#FFDFE6'},
  {text:'üö∂‚Äç‚ôÇÔ∏è ‡πÄ‡∏î‡∏ó‡πÄ‡∏•‡πá‡∏Å‡πÜ ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô', color:'#D8F7F2'}
];

let items = JSON.parse(JSON.stringify(defaultItems));
let canvas = document.getElementById('wheel');
let ctx = canvas.getContext('2d');
let cw = canvas.width, ch = canvas.height, radius = cw/2 - 20;
let center = {x:cw/2, y:ch/2};
let rotation = 0;
let isSpinning = false; let angularVelocity = 0; let spinAnimId = null; let easing = 0.995;
let resultEl = document.getElementById('result');

// ---------- draw wheel ----------
function drawWheel(){
  ctx.clearRect(0,0,cw,ch);
  const n = items.length; if(n===0) return;
  const arc = Math.PI*2 / n;
  for(let i=0;i<n;i++){
    const start = rotation + i*arc; const end = start + arc;
    ctx.beginPath(); ctx.moveTo(center.x, center.y); ctx.arc(center.x, center.y, radius, start, end); ctx.closePath();
    ctx.fillStyle = items[i].color; ctx.fill();
    ctx.save(); ctx.translate(center.x, center.y);
    ctx.rotate(start + arc/2);
    ctx.textAlign = 'right'; ctx.fillStyle = '#2b1f2b'; ctx.font = 'bold 22px sans-serif';
    ctx.fillText(items[i].text, radius - 18, 8);
    ctx.restore();
  }
  ctx.beginPath(); ctx.arc(center.x, center.y, 60, 0, Math.PI*2); ctx.fillStyle = '#fff'; ctx.fill();
  ctx.beginPath(); ctx.arc(center.x, center.y, 38, 0, Math.PI*2); ctx.fillStyle = '#ffeef6'; ctx.fill();
}

// ---------- spin ----------
function spinOnce(){
  if(isSpinning) return;
  isSpinning = true;
  angularVelocity = (Math.random()*0.8 + 1.2);
  playTick();
  animate();
}

function animate(){
  spinAnimId = requestAnimationFrame(animate);
  rotation += angularVelocity * 0.02;
  angularVelocity *= easing;
  drawWheel();
  if(Math.abs(angularVelocity) < 0.002){
    cancelAnimationFrame(spinAnimId);
    isSpinning = false; angularVelocity = 0;
    const n = items.length; const arc = Math.PI*2 / n;
    const pointerAngle = -Math.PI/2;
    const normalized = ((pointerAngle - rotation) % (Math.PI*2) + Math.PI*2) % (Math.PI*2);
    let idx = Math.floor(normalized / arc);
    idx = (idx + n) % n;
    showResult(idx);
  }
}

function showResult(idx){
  const it = items[idx];
  resultEl.innerHTML = `üéâ ‡πÑ‡∏î‡πâ: <strong>${it.text}</strong>`;
  const prev = it.color;
  it.color = '#fff8a8';
  drawWheel();
  setTimeout(()=>{it.color=prev;drawWheel();},1200);
}

// ---------- slow idle spin ----------
setInterval(()=>{ if(!isSpinning){ rotation += 0.002; drawWheel(); } }, 30);

// ---------- hearts üíó ----------
function spawnHearts(){
  const container = document.getElementById('hearts');
  for(let i=0;i<8;i++){
    const span = document.createElement('span');
    span.textContent = 'üíó';
    span.style.left = (Math.random()*100)+'%';
    span.style.fontSize = (18+Math.random()*18)+'px';
    span.style.animationDelay = (Math.random()*5)+'s';
    container.appendChild(span);
    setTimeout(()=>span.remove(), 6000);
  }
}
setInterval(spawnHearts, 3000);
spawnHearts();

// ---------- tick sound ----------
function playTick(){
  const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
  const tick = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  tick.frequency.value = 1200;
  gain.gain.value = 0.0001;
  tick.connect(gain); gain.connect(audioCtx.destination);
  tick.start();
  gain.gain.linearRampToValueAtTime(0.1,audioCtx.currentTime+0.02);
  gain.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+0.2);
  tick.stop(audioCtx.currentTime+0.25);
}

// ---------- UI ----------
function renderItemsUI(){
  const container = document.getElementById('items');
  container.innerHTML = '';
  items.forEach((it,i)=>{
    const div=document.createElement('div');
    div.className='item';
    const inp=document.createElement('input');
    inp.value=it.text;
    inp.addEventListener('input',e=>{items[i].text=e.target.value;drawWheel();});
    const color=document.createElement('input');
    color.type='color';color.value=it.color;
    color.addEventListener('input',e=>{items[i].color=e.target.value;drawWheel();});
    const del=document.createElement('button');del.textContent='‡∏•‡∏ö';
    del.style.background='#ff9aa2';
    del.addEventListener('click',()=>{items.splice(i,1);renderItemsUI();drawWheel();});
    div.append(inp,color,del);
    container.append(div);
  });
}

document.getElementById('addNew').addEventListener('click',()=>{
  const v=document.getElementById('newText').value.trim();
  if(!v)return;
  items.push({text:v,color:'#FFD8A8'});
  document.getElementById('newText').value='';
  renderItemsUI();drawWheel();
});
document.getElementById('shuffle').addEventListener('click',()=>{
  items.forEach(it=>it.color=`hsl(${Math.random()*360},70%,80%)`);
  renderItemsUI();drawWheel();
});
document.getElementById('reset').addEventListener('click',()=>{
  items=JSON.parse(JSON.stringify(defaultItems));
  renderItemsUI();drawWheel();
});
document.getElementById('spin').addEventListener('click',()=>spinOnce());

// ---------- intro ----------
const intro=document.getElementById('intro');
document.getElementById('startBtn').addEventListener('click',()=>{
  intro.style.display='none';
});

function init(){
  renderItemsUI();
  drawWheel();
}
init();
</script>
</body>
</html>


